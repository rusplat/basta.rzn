<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞—Å—Ç–∞ ‚Äî –±–∏–ª–µ—Ç—ã –≤ –†—è–∑–∞–Ω–∏</title>
    <style>
        :root {
            --bg: #000000;
            --card: #1c1c1e;
            --accent: #ff3b30;
            --text: #ffffff;
            --gray: #8e8e93;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        
        body { background: var(--bg); color: var(--text); min-height: 100vh; }
        .container { max-width: 450px; margin: 0 auto; padding: 20px; }

        /* –®–∞–≥ 1: –ì–ª–∞–≤–Ω–∞—è */
        .badge { color: var(--accent); font-weight: 700; font-size: 13px; text-transform: uppercase; margin-bottom: 10px; display: block; }
        h1 { font-size: 42px; font-weight: 800; margin-bottom: 10px; }
        .info-p { color: var(--gray); font-size: 15px; margin-bottom: 30px; line-height: 1.4; }
        .info-p b { color: #fff; }

        .ticket-row { 
            background: var(--card); border-radius: 16px; padding: 20px; margin-bottom: 12px; 
            display: flex; justify-content: space-between; align-items: center; 
        }
        .t-name { font-size: 18px; font-weight: 600; margin-bottom: 4px; }
        .t-price { color: var(--gray); font-size: 14px; }

        .counter { display: flex; align-items: center; gap: 15px; }
        .btn-c { width: 34px; height: 34px; border-radius: 50%; border: 1px solid #3a3a3c; background: none; color: #fff; cursor: pointer; font-size: 20px; }
        .val { font-size: 18px; font-weight: 600; min-width: 15px; text-align: center; }

        /* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É */
        .footer-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 410px; background: #fff; color: #000;
            padding: 20px; border-radius: 18px; display: none; justify-content: space-between;
            align-items: center; font-weight: 700; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* –®–∞–≥ 2: –§–æ—Ä–º–∞ */
        h2 { font-size: 28px; margin-bottom: 20px; }
        input { 
            width: 100%; padding: 18px; background: #1c1c1e; border: 1px solid #3a3a3c; 
            border-radius: 12px; color: #fff; font-size: 16px; margin-bottom: 15px; outline: none;
        }
                input:focus { border-color: var(--accent); }
        .btn-big { 
            width: 100%; padding: 18px; background: #fff; color: #000; 
            border-radius: 12px; border: none; font-size: 16px; font-weight: 700; cursor: pointer;
        }

        /* –®–∞–≥ 3: –û–ø–ª–∞—Ç–∞ */
        .pay-card { background: #fff; color: #000; padding: 25px; border-radius: 20px; margin-top: 20px; }
        .pay-card p { font-size: 13px; color: #666; margin-bottom: 4px; }
        .pay-card b { font-size: 20px; display: block; margin-bottom: 15px; }
        .timer { color: var(--accent); font-size: 32px; font-weight: 800; text-align: center; margin: 20px 0; }
        .no-link { color: inherit !important; text-decoration: none !important; }

        /* –õ–æ–∞–¥–µ—Ä */
        .loader { display: none; text-align: center; padding-top: 100px; }
        .spinner { 
            width: 40px; height: 40px; border: 3px solid #333; border-top: 3px solid #fff; 
            border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; 
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container" id="app">
    <!-- –®–∞–≥ 1 -->
    <div id="step1">
        <span class="badge">–†—è–∑–∞–Ω—å –ê—Ñ–∏—à–∞</span>
        <h1>–ë–∞—Å—Ç–∞</h1>
        <div class="info-p">
            <b>23 –º–∞—è, 19:00</b><br>
            –î–° ¬´–û–ª–∏–º–ø–∏–π—Å–∫–∏–π¬ª<br>
            –†—è–∑–∞–Ω—å, —É–ª. –ó—É–±–∫–æ–≤–æ–π, 12–∫2
        </div>

        <div class="ticket-row">
            <div><div class="t-name">–¢–∞–Ω—Ü–ø–æ–ª</div><div class="t-price">2 500 ‚ÇΩ</div></div>
            <div class="counter">
                <button class="btn-c" onclick="change('t1', -1)">‚Äì</button>
                <div class="val" id="t1">0</div>
                <button class="btn-c" onclick="change('t1', 1)">+</button>
            </div>
        </div>

        <div class="ticket-row">
            <div><div class="t-name">–§–∞–Ω-–∑–æ–Ω–∞</div><div class="t-price">4 500 ‚ÇΩ</div></div>
            <div class="counter">
                <button class="btn-c" onclick="change('t2', -1)">‚Äì</button>
                <div class="val" id="t2">0</div>
                <button class="btn-c" onclick="change('t2', 1)">+</button>
            </div>
        </div>

        <div class="ticket-row">
            <div><div class="t-name">–°–µ–∫—Ç–æ—Ä VIP</div><div class="t-price">8 000 ‚ÇΩ</div></div>
            <div class="counter">
                <button class="btn-c" onclick="change('t3', -1)">‚Äì</button>
                <div class="val" id="t3">0</div>
                <button class="btn-c" onclick="change('t3', 1)">+</button>
            </div>
        </div>

        <div class="footer-bar" id="footer" onclick="goStep2()">
            <span>–í—ã–±—Ä–∞–Ω–æ: <span id="total-c">0</span></span>
            <span id="total-p">0 ‚ÇΩ</span>
        </div>
    </div>

    <!-- –®–∞–≥ 2 -->
    <div id="step2" class="hidden">
        <h2>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
        <input type="text" id="name" placeholder="–§–ò–û">
        <input type="tel" id="phone" value="+7 " oninput="fixPhone(this)">
        <input type="email" id="email" placeholder="E-mail">
        <button class="btn-big" onclick="goStep3()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>
    </div>

    <!-- –®–∞–≥ 3 -->
    <div id="step3" class="hidden">
        <h2 style="text-align: center;">–û–ø–ª–∞—Ç–∞ –°–ë–ü</h2>
        <div class="timer" id="timer">05:00</div>
        <div class="pay-card">
            <p>–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:</p>
            <b id="final-sum">0 ‚ÇΩ</b>
            <p>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–°–ë–ü):</p>
            <b class="no-link">+7 (929) 942 81 07</b>
            <p>–ë–∞–Ω–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:</p>
            <b>–ö–ë –°–æ–ª–∏–¥–∞—Ä–Ω–æ—Å—Ç—å</b>
        </div>
        <button class="btn-big" style="background: var(--accent); color: #fff; margin-top: 20px;" onclick="goFinal()">–Ø –æ–ø–ª–∞—Ç–∏–ª(–∞)</button>
    </div>

    <!-- –§–∏–Ω–∞–ª -->
    <div id="stepFinal" class="hidden" style="text-align: center; padding-top: 60px;">
        <div style="font-size: 60px; margin-bottom: 20px;">üì®</div>
        <h2>–ì–æ—Ç–æ–≤–æ!</h2>
        <p style="color: var(--gray); margin-top: 15px; line-height: 1.6;">–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É. –ë–∏–ª–µ—Ç—ã –ø—Ä–∏–¥—É—Ç –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã.</p>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p id="l-text" style="color: var(--gray);"></p>
    </div>
</div>

<script>
    let counts = {t1:0, t2:0, t3:0}, prices = {t1:2500, t2:4500, t3:8000};

    function fixPhone(el) { if(!el.value.startsWith('+7 ')) el.value = '+7 '; }

    function change(id, d) {
        counts[id] = Math.max(0, counts[id] + d);
        document.getElementById(id).innerText = counts[id];
        let totalC = counts.t1 + counts.t2 + counts.t3;
        let totalP = (counts.t1*prices.t1) + (counts.t2*prices.t2) + (counts.t3*prices.t3);
        
        const f = document.getElementById('footer');
        if(totalC > 0) {
            f.style.display = 'flex';
            document.getElementById('total-c').innerText = totalC;
            document.getElementById('total-p').innerText = totalP.toLocaleString() + ' ‚ÇΩ';
        } else { f.style.display = 'none'; }
    }

    function showL(t, txt, next) {
        document.querySelectorAll('#app > div:not(#loader)').forEach(d => d.classList.add('hidden'));
        const l = document.getElementById('loader');
        l.style.display = 'block';
        document.getElementById('l-text').innerText = txt;
        setTimeout(() => {
            l.style.display = 'none';
            document.getElementById(next).classList.remove('hidden');
        }, t);
    }

    function goStep2() { showL(4000, "–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–µ—Ç–æ–≤...", "step2"); }
    function goStep3() {
        if(document.getElementById('name').value.length < 2) return alert('–í–≤–µ–¥–∏—Ç–µ –§–ò–û');
        showL(4000, "–ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤...", "step3");
        document.getElementById('final-sum').innerText = document.getElementById('total-p').innerText;
        startTimer();
    }
    function goFinal() { showL(20000, "–°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –æ–ø–ª–∞—Ç—É...", "stepFinal"); }

    function startTimer() {
        let t = 300, m, s;
        setInterval(() => {
            m = Math.floor(t/60); s = t%60;
            document.getElementById('timer').innerText = (m<10?'0'+m:m)+':'+(s<10?'0'+s:s);
            if(--t < 0) t = 0;
        }, 1000);
    }
</script>

</body>
</html>
